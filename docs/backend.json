{
  "entities": {
    "Note": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Note",
      "type": "object",
      "description": "Represents a single note within the QuickNote application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Note entity."
        },
        "title": {
          "type": "string",
          "description": "The title of the note."
        },
        "content": {
          "type": "string",
          "description": "The main text content of the note."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the note was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the note was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "content",
        "createdAt",
        "updatedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}/notes/{noteId}",
        "definition": {
          "entityName": "Note",
          "schema": {
            "$ref": "#/backend/entities/Note"
          },
          "description": "Stores a single note for a given user. Path-based ownership is enforced via the 'userId' path segment. ",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user who owns the note."
            },
            {
              "name": "noteId",
              "description": "The unique identifier of the note."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to ensure secure and scalable data management for the QuickNote application, adhering to the principles of Authorization Independence, Structural Segregation, Access Modeling, and Data Clarity. Since notes are private to each user, we use a path-based ownership model. Each user has their own collection of notes under their unique user ID. This eliminates the need for complex authorization logic and `get()` calls in security rules.  QAPs are satisfied because listing operations are scoped to the user's own notes and there is no mixing of public and private data."
  }
}